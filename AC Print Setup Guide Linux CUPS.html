<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AC-Print Setup Linux</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <header>
        <!-- Theme Toggle -->
        <button id="themeToggle" class="theme-toggle" title="Toggle Light/Dark Mode">
            <!-- Icon changed via CSS/JS or inline SVG switch -->
            <svg class="sun-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
            <svg class="moon-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="display:none;">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            </svg>
        </button>

        <div class="container header-inner">
            <a href="https://github.com/Eagle10021" target="_blank" class="brand-link" title="Visit my GitHub">
                <img src="images/logo.png" alt="Logo" class="brand-logo">
            </a>
            <div class="header-text">
                <div class="badge-row">
                    <span class="badge">Linux & CUPS</span>
                    <span class="badge time-badge">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            style="width:14px; display:inline-block; vertical-align:middle;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        ~10 Mins
                    </span>
                </div>
                <h1>AC-Print Setup Linux Using CUPS</h1>
                <p class="subtitle">Configuration guide for PaperCut Mobility Print</p>
            </div>
        </div>
    </header>

    <div class="container layout-wrapper">
        <aside class="toc-container">
            <nav id="toc">
                <h3>Contents</h3>
                <!-- Links generated by JS -->
            </nav>
        </aside>

        <main class="main-content">

            <div class="note"
                style="margin-top: 0; margin-bottom: 2rem; border-left-color: var(--text-muted); background-color: rgba(148, 163, 184, 0.1);">
                <span class="note-title" style="color: var(--text-muted);">Disclaimer</span>
                This is an unofficial, community-supported guide for setting up the AC-Print service on Linux. Official
                support may vary.
            </div>

            <p style="font-size: 1.1rem; color: var(--text-muted); max-width: 600px; margin-bottom: 3rem;">
                A complete guide to adding the "Find-Me" print queue on Linux distributions using IPP and the
                standardized
                Mobility Print protocol.
            </p>

            <ul class="timeline">

                <!-- STEP 1 -->
                <li class="step-item" id="step-prerequisites">
                    <div class="step-icon" title="Click to mark as done">
                        <!-- Icon: Terminal -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                    </div>

                    <div class="card">
                        <h2>Prerequisites</h2>
                        <p>Prepare your system by installing the necessary CUPS and Samba utilities.</p>

                        <h3>A. Install Packages</h3>
                        <div class="table-wrap">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Distribution</th>
                                        <th>Command</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Arch Linux</td>
                                        <td><code>sudo pacman -S cups cups-pdf samba</code></td>
                                    </tr>
                                    <tr>
                                        <td>Debian / Ubuntu</td>
                                        <td><code>sudo apt install cups cups-pdf samba</code></td>
                                    </tr>
                                    <tr>
                                        <td>Fedora / RHEL</td>
                                        <td><code>sudo dnf install cups cups-pdf samba</code></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h3>B. Start Services & Permissions</h3>
                        <p>Enable the CUPS service so it starts automatically.</p>
                        <div class="code-block">sudo systemctl enable --now cups.service</div>

                        <p>Add your user to the local printer admin group:</p>
                        <div class="code-block">sudo groupadd lpadmin
                            sudo usermod -aG lpadmin your_username</div>

                        <div class="note">
                            <span class="note-title">Important</span>
                            Running the <code>usermod</code> command for the first time usually requires a
                            <strong>Logout/Login</strong> cycle to apply the new group membership.
                        </div>
                    </div>
                </li>

                <!-- STEP 2 -->
                <li class="step-item" id="step-samba-fix">
                    <div class="step-icon" title="Click to mark as done">
                        <!-- Icon: Shield/Fix -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                        </svg>
                    </div>

                    <div class="card">
                        <h2>Samba Fix</h2>
                        <p>The <code class="bg-gray-200">smbspool</code> backend often requires a valid configuration
                            file
                            to function, even for client use.</p>

                        <h3>A. Check Status</h3>
                        <div class="code-block">testparm</div>
                        <p>If you see "Loaded services file OK", you can skip this step. If it errors, proceed below.
                        </p>

                        <h3>B. Create Config</h3>
                        <p>Create a minimal <code>/etc/samba/smb.conf</code>:</p>
                        <div class="code-block">[global]
                            workgroup = WORKGROUP
                            security = user</div>
                        <p
                            style="font-size: 0.9rem; color: var(--text-muted); margin-top: 0.5rem; margin-bottom: 0.5rem;">
                            To save: Press <strong>Ctrl + O</strong>, then <strong>Enter</strong>. To exit: Press
                            <strong>Ctrl + X</strong>.
                        </p>
                        <p style="font-size: 0.9rem; color: var(--text-muted);">This file ensures the CUPS backend can
                            load
                            the necessary libraries without crashing.</p>

                        <h3>C. Verify Config</h3>
                        <p>Run the test command again to confirm the fix:</p>
                        <div class="code-block">testparm</div>
                        <p>It should now output "Loaded services file OK". You can now proceed to the next step.</p>
                    </div>
                </li>

                <!-- STEP - OPTIONAL -->
                <li class="step-item" id="step-windows-config">
                    <div class="step-icon" title="Click to mark as done">
                        <!-- Icon: Clipboard List -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                        </svg>
                    </div>

                    <div class="card">
                        <h2>
                            Windows Config Extraction
                            <span class="badge"
                                style="background-color: transparent; border: 1px solid var(--text-muted); color: var(--text-muted); font-size: 0.7em; margin-left: auto; margin-bottom: 0; padding: 0.1rem 0.6rem;">Optional</span>
                        </h2>
                        <p>This step is highly recommended to verify the exact printer configuration details, including
                            the
                            URI and driver name, by checking a working Windows machine.</p>

                        <h3>A. Open PowerShell</h3>
                        <p>Press the <strong>Windows Key</strong> and search for <code>powershell</code>.</p>

                        <h3>B. Run Dump Command</h3>
                        <div class="code-block">Get-Printer | Format-List >
                            C:\Users\YourUser\Documents\ALL_Printers_Config.txt</div>

                        <div class="note"
                            style="background-color: rgba(59, 130, 246, 0.1); border-left-color: var(--accent);">
                            <span class="note-title" style="color: var(--accent);">User Path</span>
                            Change <code>YourUser</code> to your actual Windows username. If unsure, open cmd and type
                            <code>whoami</code>. The output format is <code>DEVICENAME\user</code> (e.g.,
                            <code>Shorekeeper\eagle</code>)â€”use the name after the backslash.
                        </div>

                        <p style="font-size: 0.9rem; color: var(--text-muted);">This command creates a text file in
                            your
                            Windows Documents folder containing all active printer configuration details.</p>
                        <div class="note"
                            style="margin-top: 1.5rem; border-left-color: var(--warning); background-color: rgba(251, 191, 36, 0.1);">
                            <span class="note-title">Critical Tip</span>
                            Open the generated text file and find the printer <strong>AC-PRINT</strong>. Look for the
                            <strong>PortName</strong> value and copy the URI <strong>only up to the "AC-PRINT"
                                part</strong>.
                            Use this if it differs from the example in the next step.
                        </div>
                    </div>
                </li>

                <!-- STEP 4 -->
                <li class="step-item" id="step-cups-config">
                    <div class="step-icon" title="Click to mark as done">
                        <!-- Icon: Cog / Printer -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </div>

                    <div class="card">
                        <h2>CUPS Configuration</h2>
                        <p>Navigate to <a href="http://localhost:631/" target="_blank"
                                rel="noopener noreferrer">http://localhost:631/</a> and go to <strong>Administration >
                                Add
                                Printer</strong>.</p>

                        <div style="margin-bottom: 0.5rem; font-weight: 600; font-size: 0.9rem;">Connection URI:</div>
                        <div class="code-block" style="border-left: 4px solid var(--accent);">
                            http://rpc.pc-printer-discovery.ottawa.ad.algonquincollege.com:9163/printers/AC-PRINT</div>
                        <ol
                            style="padding-left: 1.5rem; margin-bottom: 2rem; color: var(--text-head); font-weight: 500;">
                            <li>Select <strong>Internet Printing Protocol (http)</strong></li>
                            <li>Enter the Connection URI (as seen above)</li>
                            <li>Name it <strong>AC-Print-Mobility</strong></li>
                            <li>Select Driver: <strong>Generic PostScript Printer</strong></li>
                            <li>Click <strong>Add Printer</strong></li>
                            <li>Click <strong>Set Default Options</strong></li>
                        </ol>
                    </div>
                </li>

                <!-- STEP 5 -->
                <li class="step-item" id="step-authentication">
                    <div class="step-icon" title="Click to mark as done">
                        <!-- Icon: ID Card / User -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
                        </svg>
                    </div>

                    <div class="card">
                        <h2>Authentication</h2>
                        <p>When you print, you will be prompted for credentials.</p>

                        <div class="credential-box">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <div>
                                    <span class="cred-label">Username</span>
                                    <span class="cred-value">AC Network User</span>
                                </div>
                                <div>
                                    <span class="cred-label">Password</span>
                                    <span class="cred-value">AC Network Pass</span>
                                </div>
                            </div>
                        </div>

                        <div class="note"
                            style="border-left-color: var(--success); background-color: rgba(16, 185, 129, 0.1);">
                            <span class="note-title" style="color: #065f46;">Success</span>
                            Once the job status is "Completed", tap your student card at any printer to release.
                        </div>
                    </div>
                </li>

            </ul>

            <footer>
                <p>&copy; 2025 Unofficial Guide. Created for Algonquin College Students and Staff.</p>
            </footer>

        </main>
    </div>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top" title="Back to Top">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
        </svg>
    </button>

    <script src="script.js"></script>

</body>

</html>